{% extends "private/base.html" %}
{% load widget_tweaks %}
{% load static %}
{% block content %}
        <h3>Editando Usuario</h3>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="d-flex align-items-center">
                
                    {% if user.photo %}
                        <img id="profile-image" src="{{ user.photo.url }}" alt="Foto" class="avatar-md">
                    {% else %}
                        <img id="profile-image" src="{% static 'img/untils/nophoto.jpg' %}" alt="Foto"  class="avatar-md">
                    {% endif %}
                
                
                    <div class="form-group ms-2">
                        <label for="{{ form.photo.id_for_label }}" class="form-label">Subir una nueva foto</label>
                        {{ form.photo|add_class:"form-control" }}
                    
                </div>
            </div>
            

            <div class="form-group">
                <label for="{{ form.username.id_for_label }}" class="form-label">Username</label>
                {{ form.username|add_class:"form-control" }}
            </div>

            <div class="form-group">
                <label for="{{ form.email.id_for_label }}" class="form-label">Correo</label>
                {{ form.email|add_class:"form-control" }}
            </div>

            <div class="form-group">
                <label for="{{ form.first_name.id_for_label }}" class="form-label">Nombres</label>
                {{ form.first_name|add_class:"form-control" }}
            </div>

            <div class="form-group">
                <label for="{{ form.last_name.id_for_label }}" class="form-label">Primer Apellido</label>
                {{ form.last_name|add_class:"form-control" }}
            </div>

            <div class="form-group">
                <label for="{{ form.second_last_name.id_for_label }}" class="form-label">Segundo Apellido</label>
                {{ form.second_last_name|add_class:"form-control" }}
            </div>

            <div class="form-group">
                <label for="{{ form.phone.id_for_label }}" class="form-label">Teléfono</label>
                {{ form.phone|add_class:"form-control" }}
            </div>

            <div class="form-group">
                <label for="{{ form.birthdate.id_for_label }}" class="form-label">Fecha de Nacimiento</label>
                {{ form.birthdate|add_class:"form-control" }}
            </div>

            <div class="form-group">
                <label for="{{ form.gender.id_for_label }}" class="form-label">Género</label>
                {{ form.gender|add_class:"form-control" }}
            </div>

            <div class="form-group">
                <label for="{{ form.role.id_for_label }}" class="form-label">Rol</label>
                {{ form.role|add_class:"form-control" }}
            </div>

            <a class="btn btn-outline-primary mt-3" href="{% url 'users:list' %}">Cancelar</a>
            <button class="btn btn-primary mt-3" type="submit">Guardar</button>
        </form>

        <script>
            document.getElementById('id_photo').addEventListener('change', function(event) {
            var selectedFile = event.target.files[0];
            var url = URL.createObjectURL(selectedFile);
            console.log('URL de la imagen seleccionada:', url);

            if(url){
            photo = document.getElementById('profile-image')
            photo.src = url
            }

        });    

        </script>

{% endblock %}
